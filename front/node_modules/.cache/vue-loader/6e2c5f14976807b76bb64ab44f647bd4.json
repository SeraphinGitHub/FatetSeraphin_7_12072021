{"remainingRequest":"E:\\__Web Dev__ Formation\\FatetSeraphin_7_12072021\\front\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!E:\\__Web Dev__ Formation\\FatetSeraphin_7_12072021\\front\\src\\components\\Pages_Swap\\Actu\\Publish.vue?vue&type=style&index=0&id=2dd2e444&lang=scss","dependencies":[{"path":"E:\\__Web Dev__ Formation\\FatetSeraphin_7_12072021\\front\\src\\components\\Pages_Swap\\Actu\\Publish.vue","mtime":1628321768363},{"path":"E:\\__Web Dev__ Formation\\FatetSeraphin_7_12072021\\front\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\__Web Dev__ Formation\\FatetSeraphin_7_12072021\\front\\node_modules\\vue-loader-v16\\dist\\stylePostLoader.js","mtime":1626466876000},{"path":"E:\\__Web Dev__ Formation\\FatetSeraphin_7_12072021\\front\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"E:\\__Web Dev__ Formation\\FatetSeraphin_7_12072021\\front\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\__Web Dev__ Formation\\FatetSeraphin_7_12072021\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\__Web Dev__ Formation\\FatetSeraphin_7_12072021\\front\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1626466876000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQoNCiAgICAuYWRkLWZpbGUtY29udGFpbmVyIGlucHV0W3R5cGU9ZmlsZV0gew0KICAgICAgICBkaXNwbGF5OiBub25lOw0KICAgIH0NCg=="},{"version":3,"sources":["E:\\__Web Dev__ Formation\\FatetSeraphin_7_12072021\\front\\src\\components\\Pages_Swap\\Actu\\Publish.vue"],"names":[],"mappings":";;IA+GI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;QACjC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;IACjB","file":"E:/__Web Dev__ Formation/FatetSeraphin_7_12072021/front/src/components/Pages_Swap/Actu/Publish.vue","sourceRoot":"","sourcesContent":["<template>\r\n    <section class=\"flexCenter publish-flow\">\r\n        \r\n        <form class=\"flexCenter post-form\" method=\"POST\">\r\n            \r\n            <UserCaption/>\r\n            \r\n            <div class=\"flexCenter post-container\">\r\n                <input name=\"title\" id=\"title\" type=\"text\" placeholder=\"Titre de la publication\" v-model=\"title\">\r\n                <textarea name=\"textContent\" id=\"textContent\" type=\"text\" placeholder=\"Écrivez quelque chose\" v-model=\"textContent\"></textarea>\r\n                <img class=\"imagePreview\">\r\n            </div>\r\n\r\n            <div class=\"flexCenter add-file-container\">\r\n                <input type=\"file\" name=\"image\" id=\"file\" accept=\"image/*\" @change=\"preview()\" ref=\"addFile\">\r\n                <button class=\"btn add-image-btn\" @click=\"$refs.addFile.click()\" type=\"button\">Ajouter une image</button>\r\n                <button class=\"btn green-btn publish-btn\" @click.prevent=\"postArticle()\" type=\"submit\">Publier</button>\r\n            </div>\r\n\r\n            <transition name=\"fade\">\r\n                <p class=\"flexCenter form-alert\" v-show=\"isEmpty\">{{ emptyMsg }}</p>\r\n            </transition>\r\n        </form>\r\n\r\n    </section>\r\n</template>\r\n\r\n\r\n<script>\r\n    import UserCaption from \"./UserCaption.vue\"\r\n\r\n    export default {\r\n        name: \"Publish\",\r\n\r\n        components: {\r\n            UserCaption,            \r\n        },\r\n\r\n        props: {\r\n            isLoading: Boolean,\r\n        },\r\n\r\n        data() {\r\n            return {\r\n                file: \"\",\r\n                title: \"\",\r\n                textContent: \"\",\r\n                emptyMsg: \"Vous devez renseigner un titre et écrire du texte !\",\r\n                \r\n                isPublish: false,\r\n                isEmpty: false,\r\n\r\n                token: window.localStorage.getItem(\"Token\"),\r\n            }\r\n        },\r\n\r\n        methods: {            \r\n            preview() {\r\n                const file = document.getElementById(\"file\").files;\r\n\r\n                if(file.length > 0) {\r\n                    const fileReader = new FileReader();\r\n                    \r\n                    fileReader.onload = (event) => {\r\n                        const imagePreview = document.querySelector(\".imagePreview\");\r\n                        imagePreview.setAttribute(\"src\", event.target.result);\r\n                    }\r\n\r\n                    fileReader.readAsDataURL(file[0]);\r\n                } this.file = this.$refs.addFile.files[0];\r\n            },\r\n\r\n\r\n            postArticle() {\r\n                const postForm = document.querySelector(\".post-form\");\r\n                let formData = new FormData(postForm);\r\n                formData.forEach((key, value) => formData[value] = key);\r\n\r\n                if(this.title !== \"\" && this.textContent !== \"\") {\r\n                    this.createPublish(formData);\r\n                    this.$emit(\"posted\", this.isPublish);\r\n                }\r\n\r\n                else {\r\n                    this.isEmpty = true;\r\n                    this.emptyMsg;\r\n                    setTimeout(() => this.isEmpty = false, 2000);\r\n                }\r\n            },\r\n\r\n\r\n            async createPublish(formData) {\r\n                const response = await fetch(\"http://localhost:3000/api/publish/create\", {\r\n                    headers: { \"Authorization\": `Bearer ${this.token}` },\r\n                    method: \"POST\",\r\n                    body: formData\r\n                });\r\n                try {\r\n                    await response;\r\n                    this.isPublish = !this.isPublish;\r\n                    this.$parent.refreshPosts();\r\n                }\r\n                catch(error) { console.log(\"error\", error) }\r\n            },\r\n        }\r\n    }\r\n</script>\r\n\r\n\r\n<style lang=\"scss\">\r\n\r\n    .add-file-container input[type=file] {\r\n        display: none;\r\n    }\r\n</style>\r\n\r\n\r\n<style scoped lang=\"scss\">\r\n    .publish-flow {\r\n        overflow: hidden;\r\n        align-items: flex-start;\r\n        height: 90%; \r\n    }\r\n\r\n    .post-form {        \r\n        position: relative;\r\n        height: auto;\r\n        border-radius: 20px;\r\n    }\r\n\r\n    #title {\r\n        height: 20px;\r\n    }\r\n\r\n    /* ========== Alert message ========== */\r\n    .form-alert {\r\n        position: absolute;\r\n        height: 40px;\r\n        width: 85%;\r\n        margin: 0;\r\n        padding: 5px;\r\n        bottom: 45px;\r\n        font-size: 100%;\r\n        line-height: 120%;\r\n    }\r\n\r\n    .post-form,\r\n    .user-pict {\r\n        margin: 8px;\r\n    }\r\n\r\n    .post-container {\r\n        justify-content: space-between;\r\n        width: 90%;\r\n    }\r\n\r\n    .post-container textarea {\r\n        margin-top: 5px;\r\n        height: 50px;\r\n    }\r\n\r\n\r\n    /* ========== File Preview ==========*/\r\n    .imagePreview {\r\n        margin: auto;\r\n        margin-top: 5px;\r\n        object-fit: cover;\r\n        width: 50%;\r\n        max-height: 120px;\r\n        max-width: 150px;\r\n    }\r\n\r\n\r\n    /* ========== Buttons ========== */\r\n    .publish-btn {\r\n        width: 50%;\r\n    }\r\n\r\n    .add-image-btn,\r\n    .publish-btn {\r\n        margin-top: 8px;\r\n    }\r\n\r\n    .add-image-btn {\r\n        width: 72%;\r\n    }\r\n\r\n    .publish-btn {\r\n        margin-bottom: 10px;\r\n    }\r\n\r\n\r\n\r\n    /* =============================================================================== */\r\n    /*      Tablet Small Size       */\r\n    /* =============================================================================== */\r\n    @media screen and (min-width: 421px) and (max-width : 576px) {\r\n\r\n        input {\r\n            height: 30px !important;\r\n        }\r\n\r\n        textarea {\r\n            height: 80px !important;\r\n            font-size: 110%;\r\n        }\r\n\r\n        .imagePreview {\r\n            width: 100%;\r\n            max-height: 200px;\r\n            max-width: 300px;\r\n        }\r\n     \r\n        .add-image-btn,\r\n        .publish-btn {\r\n            width: 55%;\r\n        }\r\n\r\n        .form-alert {\r\n            width: 60% !important;\r\n            font-size: 120%;\r\n            bottom: 50px;\r\n        }\r\n    }\r\n\r\n\r\n    /* =============================================================================== */\r\n    /*      Tablet Big Size       */\r\n    /* =============================================================================== */\r\n    @media screen and (min-width: 577px) and (max-width : 768px) {\r\n\r\n        .publish-flow {\r\n            width: 80%;\r\n        }\r\n\r\n        input {\r\n            height: 30px !important;\r\n        }\r\n\r\n        textarea {\r\n            height: 80px !important;\r\n            font-size: 110%;\r\n        }\r\n\r\n        .imagePreview {\r\n            width: 100%;\r\n            max-height: 280px;\r\n            max-width: 300px;\r\n        }\r\n\r\n        .add-image-btn,\r\n        .publish-btn {\r\n            width: 55%;\r\n        }\r\n\r\n        .form-alert {\r\n            width: 60% !important;\r\n            font-size: 120%;\r\n            bottom: 50px;\r\n        }\r\n    }\r\n\r\n\r\n    /* =============================================================================== */\r\n    /*      Laptop Small Size       */\r\n    /* =============================================================================== */\r\n    @media screen and (min-width: 769px) and (max-width : 992px) {\r\n        \r\n        .publish-flow {\r\n            width: 80%;\r\n        }\r\n\r\n        input {\r\n            height: 30px !important;\r\n            margin-bottom: 5px;\r\n        }\r\n\r\n        textarea {\r\n            height: 100px !important;\r\n            margin-bottom: 5px;\r\n            font-size: 110%;\r\n        }\r\n\r\n        .imagePreview {\r\n            width: 100%;\r\n            max-height: 370px;\r\n            max-width: 400px;\r\n        }\r\n        \r\n        .add-image-btn,\r\n        .publish-btn {\r\n            height: 60px;\r\n            width: 35%;\r\n            margin: 20px;\r\n            margin-left: 30px;\r\n            margin-right: 30px;\r\n        }\r\n\r\n        .form-alert {\r\n            width: 60% !important;\r\n            font-size: 120%;\r\n            bottom: 60px;\r\n        }\r\n    }\r\n\r\n\r\n    /* =============================================================================== */\r\n    /*      Laptop Big Size      */\r\n    /* =============================================================================== */\r\n    @media screen and (min-width: 993px) and (max-width : 1366px) {\r\n        \r\n        .publish-flow {\r\n            width: 72%;\r\n        }\r\n        \r\n        input {\r\n            height: 30px !important;\r\n            margin-bottom: 5px;\r\n        }\r\n\r\n        textarea {\r\n            height: 80px !important;\r\n            margin-bottom: 5px;\r\n            font-size: 110%;\r\n        }\r\n\r\n        .imagePreview {\r\n            width: 100%;\r\n            max-height: 380px;\r\n            max-width: 400px;\r\n        }\r\n        \r\n        .add-image-btn,\r\n        .publish-btn {\r\n            width: 35%;\r\n            margin: 20px;\r\n            margin-left: 30px;\r\n            margin-right: 30px;\r\n        }\r\n\r\n        .form-alert {\r\n            width: 60% !important;\r\n            font-size: 130%;\r\n            bottom: 60px;\r\n        }\r\n    }\r\n\r\n\r\n    /* =============================================================================== */\r\n    /*      Screen Normal Size && Over      */\r\n    /* =============================================================================== */\r\n    @media screen and (min-width: 1367px) {\r\n        .publish-flow {\r\n            width: 80%;\r\n        }\r\n\r\n        .post-form {\r\n            width: 65%;\r\n            padding-left: 8%;\r\n            padding-right: 8%;\r\n        }\r\n        \r\n        input {\r\n            height: 35px !important;\r\n            margin-bottom: 5px;\r\n        }\r\n\r\n        textarea {\r\n            height: 100px !important;\r\n            margin-bottom: 5px;\r\n            font-size: 110%;\r\n        }\r\n\r\n        .imagePreview {\r\n            width: 100%;\r\n            max-height: 420px;\r\n            max-width: 450px;\r\n        }\r\n        \r\n        .add-image-btn,\r\n        .publish-btn {\r\n            height: 60px;\r\n            width: 35%;\r\n            margin: 30px;\r\n            margin-left: 50px;\r\n            margin-right: 50px;\r\n        }\r\n\r\n        .form-alert {\r\n            width: 60% !important;\r\n            font-size: 130%;\r\n            bottom: 80px;\r\n        }\r\n    }\r\n</style>"]}]}