{"remainingRequest":"E:\\__Web Dev__ Formation\\FatetSeraphin_7_12072021\\front\\node_modules\\babel-loader\\lib\\index.js!E:\\__Web Dev__ Formation\\FatetSeraphin_7_12072021\\front\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\__Web Dev__ Formation\\FatetSeraphin_7_12072021\\front\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!E:\\__Web Dev__ Formation\\FatetSeraphin_7_12072021\\front\\src\\components\\Pages_Swap\\Actu\\Publish.vue?vue&type=script&lang=js","dependencies":[{"path":"E:\\__Web Dev__ Formation\\FatetSeraphin_7_12072021\\front\\src\\components\\Pages_Swap\\Actu\\Publish.vue","mtime":1628198449744},{"path":"E:\\__Web Dev__ Formation\\FatetSeraphin_7_12072021\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\__Web Dev__ Formation\\FatetSeraphin_7_12072021\\front\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"E:\\__Web Dev__ Formation\\FatetSeraphin_7_12072021\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\__Web Dev__ Formation\\FatetSeraphin_7_12072021\\front\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1626466876000},{"path":"E:\\__Web Dev__ Formation\\FatetSeraphin_7_12072021\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\__Web Dev__ Formation\\FatetSeraphin_7_12072021\\front\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"E:\\__Web Dev__ Formation\\FatetSeraphin_7_12072021\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\__Web Dev__ Formation\\FatetSeraphin_7_12072021\\front\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1626466876000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkU6L19fV2ViIERldl9fIEZvcm1hdGlvbi9GYXRldFNlcmFwaGluXzdfMTIwNzIwMjEvZnJvbnQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0IFVzZXJDYXB0aW9uIGZyb20gIi4vVXNlckNhcHRpb24udnVlIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJQdWJsaXNoIiwKICBjb21wb25lbnRzOiB7CiAgICBVc2VyQ2FwdGlvbjogVXNlckNhcHRpb24KICB9LAogIHByb3BzOiB7CiAgICBpc0xvYWRpbmc6IEJvb2xlYW4KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBmaWxlOiAiIiwKICAgICAgdGl0bGU6ICIiLAogICAgICB0ZXh0Q29udGVudDogIiIsCiAgICAgIGVtcHR5TXNnOiAiVm91cyBkZXZleiByZW5zZWlnbmVyIHVuIHRpdHJlIGV0IMOpY3JpcmUgZHUgdGV4dGUgISIsCiAgICAgIGlzUHVibGlzaDogZmFsc2UsCiAgICAgIGlzRW1wdHk6IGZhbHNlLAogICAgICB0b2tlbjogd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCJUb2tlbiIpCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgcHJldmlldzogZnVuY3Rpb24gcHJldmlldygpIHsKICAgICAgdmFyIGZpbGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZmlsZSIpLmZpbGVzOwoKICAgICAgaWYgKGZpbGUubGVuZ3RoID4gMCkgewogICAgICAgIHZhciBmaWxlUmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsKCiAgICAgICAgZmlsZVJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICAgIHZhciBpbWFnZVByZXZpZXcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIuaW1hZ2VQcmV2aWV3Iik7CiAgICAgICAgICBpbWFnZVByZXZpZXcuc2V0QXR0cmlidXRlKCJzcmMiLCBldmVudC50YXJnZXQucmVzdWx0KTsKICAgICAgICB9OwoKICAgICAgICBmaWxlUmVhZGVyLnJlYWRBc0RhdGFVUkwoZmlsZVswXSk7CiAgICAgIH0KCiAgICAgIHRoaXMuZmlsZSA9IHRoaXMuJHJlZnMuYWRkRmlsZS5maWxlc1swXTsKICAgIH0sCiAgICBwb3N0QXJ0aWNsZTogZnVuY3Rpb24gcG9zdEFydGljbGUoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgcG9zdEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIucG9zdC1mb3JtIik7CiAgICAgIHZhciBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YShwb3N0Rm9ybSk7CiAgICAgIGZvcm1EYXRhLmZvckVhY2goZnVuY3Rpb24gKGtleSwgdmFsdWUpIHsKICAgICAgICByZXR1cm4gZm9ybURhdGFbdmFsdWVdID0ga2V5OwogICAgICB9KTsKCiAgICAgIGlmICh0aGlzLnRpdGxlICE9PSAiIiAmJiB0aGlzLnRleHRDb250ZW50ICE9PSAiIikgewogICAgICAgIHRoaXMuY3JlYXRlUHVibGlzaChmb3JtRGF0YSk7CiAgICAgICAgdGhpcy4kZW1pdCgicG9zdGVkIiwgdGhpcy5pc1B1Ymxpc2gpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuaXNFbXB0eSA9IHRydWU7CiAgICAgICAgdGhpcy5lbXB0eU1zZzsKICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiBfdGhpcy5pc0VtcHR5ID0gZmFsc2U7CiAgICAgICAgfSwgMjAwMCk7CiAgICAgIH0KICAgIH0sCiAgICBjcmVhdGVQdWJsaXNoOiBmdW5jdGlvbiBjcmVhdGVQdWJsaXNoKGZvcm1EYXRhKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgcmVzcG9uc2U7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gZmV0Y2goImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvcHVibGlzaC9jcmVhdGUiLCB7CiAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgICAiQXV0aG9yaXphdGlvbiI6ICJCZWFyZXIgIi5jb25jYXQoX3RoaXMyLnRva2VuKQogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBtZXRob2Q6ICJQT1NUIiwKICAgICAgICAgICAgICAgICAgYm9keTogZm9ybURhdGEKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMzsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA2OwogICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlOwoKICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICBfdGhpczIuaXNQdWJsaXNoID0gIV90aGlzMi5pc1B1Ymxpc2g7CgogICAgICAgICAgICAgICAgX3RoaXMyLiRwYXJlbnQucmVmcmVzaFBvc3RzKCk7CgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEzOwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMTA7CiAgICAgICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDMpOwogICAgICAgICAgICAgICAgY29uc29sZS5sb2coImVycm9yIiwgX2NvbnRleHQudDApOwoKICAgICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSwgbnVsbCwgW1szLCAxMF1dKTsKICAgICAgfSkpKCk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["E:\\__Web Dev__ Formation\\FatetSeraphin_7_12072021\\front\\src\\components\\Pages_Swap\\Actu\\Publish.vue"],"names":[],"mappings":";;;;AA6BI,OAAO,WAAP,MAAwB,mBAAxB;AAEA,eAAe;AACX,EAAA,IAAI,EAAE,SADK;AAGX,EAAA,UAAU,EAAE;AACR,IAAA,WAAW,EAAX;AADQ,GAHD;AAOX,EAAA,KAAK,EAAE;AACH,IAAA,SAAS,EAAE;AADR,GAPI;AAWX,EAAA,IAXW,kBAWJ;AACH,WAAO;AACH,MAAA,IAAI,EAAE,EADH;AAEH,MAAA,KAAK,EAAE,EAFJ;AAGH,MAAA,WAAW,EAAE,EAHV;AAIH,MAAA,QAAQ,EAAE,qDAJP;AAMH,MAAA,SAAS,EAAE,KANR;AAOH,MAAA,OAAO,EAAE,KAPN;AASH,MAAA,KAAK,EAAE,MAAM,CAAC,YAAP,CAAoB,OAApB,CAA4B,OAA5B;AATJ,KAAP;AAWH,GAvBU;AAyBX,EAAA,OAAO,EAAE;AACL,IAAA,OADK,qBACK;AACN,UAAM,IAAG,GAAI,QAAQ,CAAC,cAAT,CAAwB,MAAxB,EAAgC,KAA7C;;AAEA,UAAG,IAAI,CAAC,MAAL,GAAc,CAAjB,EAAoB;AAChB,YAAM,UAAS,GAAI,IAAI,UAAJ,EAAnB;;AAEA,QAAA,UAAU,CAAC,MAAX,GAAoB,UAAC,KAAD,EAAW;AAC3B,cAAM,YAAW,GAAI,QAAQ,CAAC,aAAT,CAAuB,eAAvB,CAArB;AACA,UAAA,YAAY,CAAC,YAAb,CAA0B,KAA1B,EAAiC,KAAK,CAAC,MAAN,CAAa,MAA9C;AACJ,SAHA;;AAKA,QAAA,UAAU,CAAC,aAAX,CAAyB,IAAI,CAAC,CAAD,CAA7B;AACJ;;AAAE,WAAK,IAAL,GAAY,KAAK,KAAL,CAAW,OAAX,CAAmB,KAAnB,CAAyB,CAAzB,CAAZ;AACL,KAdI;AAiBL,IAAA,WAjBK,yBAiBS;AAAA;;AACV,UAAM,QAAO,GAAI,QAAQ,CAAC,aAAT,CAAuB,YAAvB,CAAjB;AACA,UAAI,QAAO,GAAI,IAAI,QAAJ,CAAa,QAAb,CAAf;AACA,MAAA,QAAQ,CAAC,OAAT,CAAiB,UAAC,GAAD,EAAM,KAAN;AAAA,eAAgB,QAAQ,CAAC,KAAD,CAAR,GAAkB,GAAlC;AAAA,OAAjB;;AAEA,UAAG,KAAK,KAAL,KAAe,EAAf,IAAqB,KAAK,WAAL,KAAqB,EAA7C,EAAiD;AAC7C,aAAK,aAAL,CAAmB,QAAnB;AACA,aAAK,KAAL,CAAW,QAAX,EAAqB,KAAK,SAA1B;AACJ,OAHA,MAKK;AACD,aAAK,OAAL,GAAe,IAAf;AACA,aAAK,QAAL;AACA,QAAA,UAAU,CAAC;AAAA,iBAAM,KAAI,CAAC,OAAL,GAAe,KAArB;AAAA,SAAD,EAA6B,IAA7B,CAAV;AACJ;AACH,KAhCI;AAmCC,IAAA,aAnCD,yBAmCe,QAnCf,EAmCyB;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACH,KAAK,CAAC,0CAAD,EAA6C;AACrE,kBAAA,OAAO,EAAE;AAAE,sDAA2B,MAAI,CAAC,KAAhC;AAAF,mBAD4D;AAErE,kBAAA,MAAM,EAAE,MAF6D;AAGrE,kBAAA,IAAI,EAAE;AAH+D,iBAA7C,CADF;;AAAA;AACpB,gBAAA,QADoB;AAAA;AAAA;AAAA,uBAOhB,QAPgB;;AAAA;AAQtB,gBAAA,MAAI,CAAC,SAAL,GAAiB,CAAC,MAAI,CAAC,SAAvB;;AACA,gBAAA,MAAI,CAAC,OAAL,CAAa,YAAb;;AATsB;AAAA;;AAAA;AAAA;AAAA;AAWX,gBAAA,OAAO,CAAC,GAAR,CAAY,OAAZ;;AAXW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAY7B;AA/CI;AAzBE,CAAf","sourcesContent":["<template>\r\n    <section class=\"flexCenter publish-flow\">\r\n        \r\n        <form class=\"flexCenter post-form\" method=\"POST\">\r\n            \r\n            <UserCaption/>\r\n            \r\n            <div class=\"flexCenter post-container\">\r\n                <input name=\"title\" id=\"title\" type=\"text\" placeholder=\"Titre de la publication\" v-model=\"title\">\r\n                <textarea name=\"textContent\" id=\"textContent\" type=\"text\" placeholder=\"Écrivez quelque chose\" v-model=\"textContent\"></textarea>\r\n                <img class=\"imagePreview\">\r\n            </div>\r\n\r\n            <div class=\"flexCenter add-file-container\">\r\n                <input type=\"file\" name=\"image\" id=\"file\" accept=\"image/*\" @change=\"preview()\" ref=\"addFile\">\r\n                <button class=\"btn add-image-btn\" @click=\"$refs.addFile.click()\" type=\"button\">Ajouter une image</button>\r\n                <button class=\"btn green-btn publish-btn\" @click.prevent=\"postArticle()\" type=\"submit\">Publier</button>\r\n            </div>\r\n\r\n            <transition name=\"fade\">\r\n                <p class=\"flexCenter form-alert\" v-show=\"isEmpty\">{{ emptyMsg }}</p>\r\n            </transition>\r\n        </form>\r\n\r\n    </section>\r\n</template>\r\n\r\n\r\n<script>\r\n    import UserCaption from \"./UserCaption.vue\"\r\n\r\n    export default {\r\n        name: \"Publish\",\r\n\r\n        components: {\r\n            UserCaption,            \r\n        },\r\n\r\n        props: {\r\n            isLoading: Boolean,\r\n        },\r\n\r\n        data() {\r\n            return {\r\n                file: \"\",\r\n                title: \"\",\r\n                textContent: \"\",\r\n                emptyMsg: \"Vous devez renseigner un titre et écrire du texte !\",\r\n                \r\n                isPublish: false,\r\n                isEmpty: false,\r\n\r\n                token: window.localStorage.getItem(\"Token\"),\r\n            }\r\n        },\r\n\r\n        methods: {            \r\n            preview() {\r\n                const file = document.getElementById(\"file\").files;\r\n\r\n                if(file.length > 0) {\r\n                    const fileReader = new FileReader();\r\n                    \r\n                    fileReader.onload = (event) => {\r\n                        const imagePreview = document.querySelector(\".imagePreview\");\r\n                        imagePreview.setAttribute(\"src\", event.target.result);\r\n                    }\r\n\r\n                    fileReader.readAsDataURL(file[0]);\r\n                } this.file = this.$refs.addFile.files[0];\r\n            },\r\n\r\n\r\n            postArticle() {\r\n                const postForm = document.querySelector(\".post-form\");\r\n                let formData = new FormData(postForm);\r\n                formData.forEach((key, value) => formData[value] = key);\r\n\r\n                if(this.title !== \"\" && this.textContent !== \"\") {\r\n                    this.createPublish(formData);\r\n                    this.$emit(\"posted\", this.isPublish);\r\n                }\r\n\r\n                else {\r\n                    this.isEmpty = true;\r\n                    this.emptyMsg;\r\n                    setTimeout(() => this.isEmpty = false, 2000);\r\n                }\r\n            },\r\n\r\n\r\n            async createPublish(formData) {\r\n                const response = await fetch(\"http://localhost:3000/api/publish/create\", {\r\n                    headers: { \"Authorization\": `Bearer ${this.token}` },\r\n                    method: \"POST\",\r\n                    body: formData\r\n                });\r\n                try {\r\n                    await response;\r\n                    this.isPublish = !this.isPublish;\r\n                    this.$parent.refreshPosts();\r\n                }\r\n                catch(error) { console.log(\"error\", error) }\r\n            },\r\n        }\r\n    }\r\n</script>\r\n\r\n\r\n<style lang=\"scss\">\r\n\r\n    .add-file-container input[type=file] {\r\n        display: none;\r\n    }\r\n</style>\r\n\r\n\r\n<style scoped lang=\"scss\">\r\n    .publish-flow {\r\n        overflow: hidden;\r\n        align-items: flex-start;\r\n        height: 90%; \r\n    }\r\n\r\n    .post-form {        \r\n        position: relative;\r\n        height: auto;\r\n        border-radius: 20px;\r\n    }\r\n\r\n    #title {\r\n        height: 20px;\r\n    }\r\n\r\n    /* ========== Alert message ========== */\r\n    .form-alert {\r\n        position: absolute;\r\n        height: 40px;\r\n        width: 85%;\r\n        margin: 0;\r\n        padding: 5px;\r\n        bottom: 45px;\r\n        font-size: 100%;\r\n        line-height: 120%;\r\n    }\r\n\r\n    .post-form,\r\n    .user-pict {\r\n        margin: 8px;\r\n    }\r\n\r\n    .post-container {\r\n        justify-content: space-between;\r\n        width: 90%;\r\n    }\r\n\r\n    .post-container textarea {\r\n        margin-top: 5px;\r\n        height: 50px;\r\n    }\r\n\r\n\r\n    /* ========== File Preview ==========*/\r\n    .imagePreview {\r\n        margin: auto;\r\n        margin-top: 5px;\r\n        object-fit: cover;\r\n        width: 50%;\r\n        max-height: 120px;\r\n        max-width: 150px;\r\n    }\r\n\r\n\r\n    /* ========== Buttons ========== */\r\n    .publish-btn {\r\n        width: 50%;\r\n    }\r\n\r\n    .add-image-btn,\r\n    .publish-btn {\r\n        margin-top: 8px;\r\n    }\r\n\r\n    .add-image-btn {\r\n        width: 72%;\r\n    }\r\n\r\n    .publish-btn {\r\n        margin-bottom: 10px;\r\n    }\r\n</style>"],"sourceRoot":""}]}